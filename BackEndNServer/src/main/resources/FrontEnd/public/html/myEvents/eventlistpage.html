<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event List</title>
    <link rel="stylesheet" href="../../css/splitpageStyle.css">
</head>

<body>
    <header>
        <link rel="stylesheet" href="../css/navigatorStyle.css">
        <nav class="topnav">
            <a href="userhomepage"><img class="logo" alt="AalborgTableTop logo" src="../images/AalborgTableTop_Logo.png"></a>
            <a href="usercalendar">Calendar</a>
            <a href="usernotfoundpage">CONMAR</a>
            <a href="usernotfoundpage">About AT</a>
            <a href="usernotfoundpage">Contact</a>
            <div class="split"><a href="profilepage"><img class="logo" alt="AalborgTableTop logo" src="../images/AalborgTableTop_Logo.png"></a></div>
            <a href="/" class="split">Log Out</a>
        </nav>
    </header>
    <link rel="stylesheet" href="../../css/eventlistStyle.css">
    <div class="content">
        <div class="content-left">
            <!--should be hidden unless user is DM/Admin-->
            <a class="create-event-button" href="eventcreatepage">create event</a>

            <div class="table-container">
                <!--should have additional row with "edit" buttons for each event user has edit access to, but no row if the user has none-->
                <table id="eventTable">
                    <tr>
                      <th>Title</th>
                      <th>Date</th>
                      <th>Time</th>
                      <th>Location</th>
                      <th>DM</th>
                      <th>Players</th>
                      <th>State</th>
                    </tr>
                    <tr>
                      <td>Mines of Phandelver</td>
                      <td>1-25-2023</td>
                      <td>08:00</td>
                      <td>DiceNDrinks</td>
                      <td>Morgenfrue</td>
                      <td>TankMcgee</td>
                      <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                    <tr>
                        <td>Mines of Phandelver</td>
                        <td>1-25-2023</td>
                        <td>08:00</td>
                        <td>DiceNDrinks</td>
                        <td>Morgenfrue</td>
                        <td>TankMcgee</td>
                        <td>Rewards Released</td>
                    </tr>
                </table>
                <div class="editEventsButton" id="editEventsButton">
                    <a class="editButton" href="eventeditpage">Edit</a>
                </div>
            </div>
        </div>
        <div class="content-right">
            <aside class="ProfileMenu" id="ProfileMenu" style="display: block;">
                <ul>
                    <li><p>My Events</p></li>
                    <li><a href="profilesettingspage">Profile Settings</a></li>
                    <li><div class="MenuSpace"></div></li>
                    <li><a href="adminpage" class="MenuLine">Admin Menu</a></li>
                </ul>
            </aside>
        </div>
    </div>

    <div class="footer">
        <link rel="stylesheet" href="../../css/footerStyle.css">
        <div class="footer-navbox">
            <img class="footer-logo" alt="AalborgTableTop logo" src="../../images/AalborgTableTop_Logo.png">
            <!--Mangler links-->
            <div class="footer-links">
                <div class="footer-item">Hvad er AL?</div>
                <div class="footer-item">Facebook</div>
                <div class="footer-item">Discord</div>
                <div class="footer-item">Kontakt</div>
                <div class="footer-item">Om AT</div>
            </div>
        </div>
        <div class="footer-content"></div>
        <div class="disclaimer">Disclaimer
            This website is not affiliated with, endorsed,
            sponsored, or specifically approved by Wizards of the Coast LLC. This website may use the trademarks and other intellectual property of
            Wizards of the Coast LLC, which is permitted under Wizards’ Fan Site Policy. For example, Dungeons & Dragons® is a
            trademark[s] of Wizards of the Coast. For more information about Wizards of the Coast or any of Wizards
            trademarks or other intellectual property, please visit their website at (www.wizards.com)</div>
    </div>

    <script>
        window.addEventListener("click", function() {
            let eventTable = document.getElementById("eventTable");
            if(eventTable.contains(event.target)){
                let tablerows = document.querySelectorAll('tr');
                Array.from(tablerows).forEach((tablerow, index) =>{
                    if (tablerow.rowIndex != 0) {
                        tablerow.addEventListener('click', () => {
                            let clickedRow = event.currentTarget;
                            let editEventsButton = document.getElementById("editEventsButton");
                            let positionclickedRow = clickedRow.getBoundingClientRect();
                            let buttonTop = positionclickedRow.top + window.scrollY;
                            let buttonLeft = positionclickedRow.right + window.scrollX + 1;

                            editEventsButton.style.top = buttonTop + 'px';
                            editEventsButton.style.left = buttonLeft + 'px';
                            editEventsButton.style.display = "block";
                        })
                    }
                })
            } else {
                editEventsButton.style.display = "none";
            }
        })

    </script>
</body>
</html>