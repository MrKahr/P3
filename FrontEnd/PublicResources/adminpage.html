<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="..\Styles\adminpagestyle.css">
    <link rel="stylesheet" href="..\Styles\dummyStyle.css">
    <!-- This library imports html icon list-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Adminpage</title>
</head>

<body>
    <header>
        <link rel="stylesheet" href="../Styles/navigatorStyle.css">
        <nav class="topnav">
            <a href="../PublicResources/userhomepage.html"><img class="logo" alt="AalborgTableTop logo" src="../Images/AalborgTableTop_Logo.png"></a>
            <a href="../PublicResources/userCalendar.html">Calendar</a>
            <a href="../PublicResources/usernotfoundpage.html">CONMAR</a>
            <a href="../PublicResources/usernotfoundpage.html">About AT</a>
            <a href="../PublicResources/usernotfoundpage.html">Contact</a>
            <div class="split"><a href="../PublicResources/myProfile/profilepage.html"><img class="logo" alt="AalborgTableTop logo" src="../Images/AalborgTableTop_Logo.png"></a></div>
            <a href="../PublicResources/publichomepage.html" class="split">Log Out</a>
        </nav>
    </header>

    <div class="content">
        <div class="content-left">
            <div class="tab">
                <button class="tablinks" onclick="showTab(event, 'manageUsers')">Manage Users</button>
                <button class="tablinks" onclick="showTab(event, 'manageEvents')">Manage Events</button>
                <button class="tablinks" onclick="showTab(event, 'blogPosts')">Blog Posts</button>
                <button class="tablinks" onclick="showTab(event, 'manageModules')">Manage Modules</button>
            </div>
            
            <div class="tabcontent" id="manageUsers" style="display: none;">
                <div style="overflow-x:auto;">
                    <table>
                        <tr>
                            <th>Username</th>
                            <th>Role</th>
                            <th>Has paid?</th>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                        </tr>
                    </table>
                    <div class="manageUsersButtons" id="manageUsersButtons">
                        <form>
                            <label for="managerole"></label>
                            <select id="managerole" name="Role">
                                <option value="guest">Guest</option>
                                <option value="member">Member</option>
                                <option value="dm">DM</option>
                                <option value="admin">Admin</option>
                                <option value="superadmin">SuperAdmin</option><!-- I think this one will be removed -->
                            </select>
                            <input type="submit" value="Save">
                            <button>Ban User</button>
                        </form>
                    </div>
                </div>
            </div>
    
    
    
            <div class="tabcontent" id="manageEvents" style="display: none;">
                <div style="overflow-x:auto;">
                    <table id="manageEventsTable">
                        <tr>
                            <th>Date <i class="fa fa-edit" id="editDate" style="display: none"></i></th>
                            <th>Time <i class="fa fa-edit" id="editTime" style="display: none"></i></th>
                            <th>Location <i class="fa fa-edit" id="editLocation" style="display: none"></i></th>
                            <th>DM <i class="fa fa-plus-square-o" id="editDm" style="display: none"></i></th>
                            <th>Players <i class="fa fa-plus-square-o" id="editPlayers" style="display: none"></i></th>
                            <th>State<i class="fa fa-edit" id="editState" style="display: none"></i></th>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                        </tr>
                    </table>
                    <div class="manageEventsButtons" id="manageEventsButtons">
                        <button id="modifyButton">Modify</button>
                    </div>
                    <div class="editEventInput" id="editEventInput" style="display: none">
                        <form>
                            <table id="editSpace">
                                <tr>
                                    <td><input type="date" id="editDateInput" placeholder="Date"></td>
                                    <td><input type="time" id="editTimeInput" placeholder="Time"></td>
                                    <td><input type="text" id="editLocationInput" placeholder="Location"></td>
                                    <td><input type="text" id="editDmInput" placeholder="Dm"></td>
                                    <td><input type="text" id="editPlayersInput" placeholder="Player"></td>
                                    <td><select id="editStateinput" name="State">
                                        <option value="Planned">Planned</option>
                                        <option value="Concluded">Concluded</option>
                                        <option value="Rewards Released">Rewards Released</option>
                                        <option value="Cancelled">Cancelled</option>
                                        </select></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><div id="editFinished">
                                        <input type="submit" value="Confirm">
                                        <input type="reset" value="Cancel">
                                    </div></td>
                                </tr>
                            </table>
                        </form>
                    </div>
                </div>
            </div>
    
    
    
            <div class="tabcontent" id="blogPosts" style="display: none;">
                <div class="blogmanage" style="overflow-x:auto;">
                    <div class="createPost">
                        <form>
                            <label for="blogTextBox">Create blog post</label><br>
                            <input type="text" id="postTitle" placeholder="Title goes here" style="width: 314px"><br>
                            <textarea id="blogTextBox" placeholder="Text here" rows="10" cols="41"></textarea>
                            <input type="submit" value="Post">
                        </form>
                    </div>
                    <div class="postTable">
                        <table>
                            <tr>
                                <th>Date </th>
                                <th>Title</th>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                            </tr>
                        </table>
                    </div>
                    <div class="blogPostsButtons" id="blogPostsButtons">
                        <form>
                            <button>Edit</button>
                            <button>Delete</button>
                        </form>
                    </div>
                </div>
            </div>
    
    
    
            <div class="tabcontent" id="manageModules" style="display: none">
                <div class="modulemanage" style="overflow-x:auto;">
                    <div class="createModule">
                        <form>
                            <label for="moduleTextBox">Create module</label><br>
                            <input type="text" id="moduleTitle" placeholder="Title goes here" style="width: 314px"><br>
                            <textarea id="moduleTextBox" placeholder="Text here" rows="10" cols="41"></textarea>
                            <input type="submit" value="Add Module">
                        </form>
                    </div>
                    <div class="moduleTable">
                        <table>
                            <tr>
                                <th>Title</th>
                            </tr>
                            <tr>
                                <td></td>
                            </tr>
                            <tr>
                            </tr>
                        </table>
                    </div>
                    <div class="manageModulesButtons" id="manageModulesButtons">
                        <form>
                            <button>Edit</button>
                            <button>Delete</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="content-right">
            <link rel="stylesheet" href="../Styles/navigatorStyle.css">
            <aside class="ProfileMenu" id="ProfileMenu" style="display: block;">
                <ul>
                    <li><a href="../PublicResources/myEvents/eventlistpage.html">My Events</a></li>
                    <li><a href="../PublicResources/myProfile/profilesettingspage.html">Profile Settings</a></li>
                    <li><div class="MenuSpace"></div></li>
                    <li><a href="../PublicResources/adminpage.html" class="MenuLine">Admin Menu</a></li>
                </ul>
            </aside>
        </div>
    </div>

    <script>
        function showTab(event, manageTab) {
            let tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            
            document.getElementById('manageUsers').style.display = "none";
            document.getElementById('manageEvents').style.display = "none";
            document.getElementById('blogPosts').style.display = "none";
            document.getElementById('manageModules').style.display = "none";
            
            document.getElementById(manageTab).style.display = "block";
            event.currentTarget.className += " active";
        }

        let tablerows = document.querySelectorAll('tr');
        Array.from(tablerows).forEach((tablerow, index) =>{
            tablerow.addEventListener('click', () => {
                let clickedRow = event.currentTarget;
                let manageUsersButtons = document.getElementById("manageUsersButtons");
                let manageEventsButtons = document.getElementById("manageEventsButtons");
                let blogPostsButtons = document.getElementById("blogPostsButtons");
                let manageModulesButtons = document.getElementById("manageModulesButtons");
                let positionclickedRow = clickedRow.getBoundingClientRect();
                let buttonTop = positionclickedRow.top + window.scrollY;
                let buttonLeft = positionclickedRow.right + window.scrollX + 1;

                manageUsersButtons.style.top = buttonTop + 'px';
                manageUsersButtons.style.left = buttonLeft + 'px';
                manageUsersButtons.style.display = "block";

                manageEventsButtons.style.top = buttonTop + 'px';
                manageEventsButtons.style.left = buttonLeft + 'px';
                manageEventsButtons.style.display = "block";

                blogPostsButtons.style.top = buttonTop + 'px';
                blogPostsButtons.style.left = buttonLeft + 'px';
                blogPostsButtons.style.display = "block";

                manageModulesButtons.style.top = buttonTop + 'px';
                manageModulesButtons.style.left = buttonLeft + 'px';
                manageModulesButtons.style.display = "block";
            })
        })

        document.getElementById('modifyButton').addEventListener('click', function() {
            let editDate = document.getElementById("editDate");
            let editTime = document.getElementById("editTime");
            let editLocation = document.getElementById("editLocation");
            let editDm = document.getElementById("editDm");
            let editPlayers = document.getElementById("editPlayers");
            let editState = document.getElementById("editState");
            if(editDate.style.display == "none" && editTime.style.display == "none" && editLocation.style.display == "none" && editDm.style.display == "none" && editPlayers.style.display == "none" && editState.style.display == "none") {
                editDate.style.display = "block";
                editTime.style.display = "block";
                editLocation.style.display = "block";
                editDm.style.display = "block";
                editPlayers.style.display = "block";
                editState.style.display = "block";
            } else {
                editDate.style.display = "none";
                editTime.style.display = "none";
                editLocation.style.display = "none";
                editDm.style.display = "none";
                editPlayers.style.display = "none";
                editState.style.display = "none";
            }

            Array.from(tablerows).forEach((tablerow, index) =>{
                tablerow.addEventListener('click', () => {
                    let clickedRow = event.currentTarget;
                    let editEventInput = document.getElementById("editEventInput");
                    clickedRow.parentNode.insertBefore(editEventInput, clickedRow.nextSibling);
                    editEventInput.style.display = "block";
                })
            })
        })
    </script>
</body>
</html>